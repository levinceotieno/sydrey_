<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Educational Blog</title>
  <link rel="stylesheet" href="/styles/blogs.css">
</head>
<body>
  <header class="navbar-container">
    <div class="navbar">
      <button class="menu-toggle" id="menuToggle">☰</button>
      <h1 class="logo">Sydrey Educational Blog</h1>
      <nav class="nav-links">
        <a href="/products" class="nav-link">Products</a>
        <% if (user && user.isAdmin) { %>
          <a href="/admin" class="nav-link">Admin Dashboard</a>
	  <a href="/blogs/new" class="nav-link">Create Post</a>
        <% } %>
      </nav>
      <!--<button class="menu-toggle" id="menuToggle">☰</button> -->
    </div>
  </header>

  <main class="blog-page">
   <div class="blog-list">
    <% blogs.forEach(blog => { %>
      <article class="blog-card">
        <h2 class="blog-title"><%= blog.title %></h2>
        <p class="blog-content"><%= blog.content.slice(0, 100) %>...</p>
        <p class="blog-meta">By <%= blog.author %> on <%= new Date(blog.created_at).toLocaleString() %></p>
	<div class="button-container">
          <a href="/blogs/<%= blog.id %>" class="btn">Read More</a>
          <% if (user && user.isAdmin) { %>
	    <a href="/blogs/<%= blog.id %>/edit" class="btn">Edit</a>
            <form action="/blogs/<%= blog.id %>/delete" method="POST" class="inline-form">
              <button type="submit" class="btn delete">Delete</button>
            </form>
          <% } %>
        </div>
      </article>
    <% }) %>
   </div>
  </main>

  <script>
    document.getElementById('menuToggle').addEventListener('click', () => {
      document.querySelector('.nav-links').classList.toggle('visible');
    });
  </script>
</body>
</html>
